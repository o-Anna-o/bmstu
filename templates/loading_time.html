<html lang="en">
<head>
    <title>Расчёт времени погрузки контейнеров</title>
    <link rel="stylesheet" href="/static/styles/ship_style.css">
</head>
<body>
    <header>
        <h1>
            <a href="/home"><img class="home-img header-icon" src="/static/img/home-img.svg" alt="home"></a>
        </h1>
    </header>
    <div class="request">
        
        <h1>Расчёт времени погрузки контейнеров</h1>  
        
        <!-- Блок с полями ввода (всегда показываем) -->
        <div class="request__counts">
            <div class="request__cnt-20-f">
                <p>Количество 20-футовых контейнеров</p>
                <input class="request__cnt-20-f" type="number" name="containers_20ft" placeholder="Введите целое число" value="0">
            </div>
            <div class="request__cnt-40-f">
                <p>Количество 40-футовых контейнеров</p>
                <input class="request__cnt-40-f" type="number" name="containers_40ft" placeholder="Введите целое число" value="0">
            </div>
        </div>
        
        <h3>Выбранные контейнеровозы</h3>
        <div class="request__cards">
            {{ if .request.Ships }}
                <!-- Если есть корабли - показываем их -->
                {{ range .request.Ships }}
                <div class="request__card">
                    <h2>{{ .Ship.Name }}</h2>
                    <img class="ship-card__img" src="http://localhost:9000/loading-time-img/img/{{.Ship.PhotoURL}}" 
                         alt="{{.Ship.Name}}"
                         onerror="this.style.display='none'">

                    <div class="ship-card__text">
                        <p><b>Вместимость:</b> {{ .Ship.Capacity }} TEU</p>
                        <p><b>Габариты:</b> длина {{ .Ship.Length }} м, ширина {{ .Ship.Width }} м</p>
                        <p><b>Краны:</b> {{ .Ship.Cranes }} одновременно</p>
                        <p><b>Количество:</b> {{ .Count }} шт.</p>
                    </div>
                    <div class="ship-card__btns">
                        <a href="/request/{{$.request.ID}}/remove/{{.Ship.ID}}" 
                        class="ship-card__btn red-btn btn"
                        onclick="return confirm('Удалить {{.Ship.Name}} из заявки?')">
                        Удалить
                        </a>
                    </div>
                </div>
                {{ end }}
            {{ else }}
                <!-- Если корзина пустая - сообщение -->
                <div class="empty-message">
                    <p>Нет выбранных контейнеровозов. Добавьте контейнеровоз для расчета.</p>
                </div>
            {{ end }}
        </div>

        <div class="ship-card__btns">
            <a href="/home" class="ship-card__btn beige-btn btn">Добавить контейнеровоз</a>
            {{ if .request.Ships }}
                <!-- Кнопка расчета показывается только если есть корабли -->
                <a href="/home" class="ship-card__btn beige-btn btn">Рассчитать время погрузки</a>
            {{ end }}
        </div>
        
    </div>
</body>
</html>